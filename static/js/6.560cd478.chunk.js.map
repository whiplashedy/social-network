{"version":3,"sources":["hoc/withAuthRedirect.js","components/Users/Users.module.css","components/common/Paginator/Paginator.module.css","components/common/Paginator/Paginator.js","components/Users/Users.js","components/Users/UsersContainer.js"],"names":["mapStateToProps","state","isAuth","authPage","WithAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Paginator","pagesCount","totalUsersCount","pageSize","pages","i","Math","ceil","push","portionCount","leftPortionNumber","portionNumber","rightPortionNumber","new_pages","filter","el","map","className","currentPage","styles","selectedPage","onClick","onCurrentPageChange","Button","color","PrevPortion","NextPortion","Users","useState","setPortionNumber","allUsers","users","u","id","photo","src","uniqueUrlName","alt","name","button","followed","unfollowThunk","followThunk","isFetching","Preloader","UsersApiContainer","page","setCurrentPage","setUsersThunk","compose","usersPage"],"mappings":"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","file":"static/js/6.560cd478.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToProps = (state) =>({\r\n    isAuth: state.authPage.isAuth\r\n})\r\n\r\nexport const WithAuthRedirect = (Component) =>{\r\n    class RedirectComponent extends React.Component{\r\n        render(){\r\n            return !this.props.isAuth ? <Redirect to ='/login'/> : <Component {...this.props} />\r\n        }\r\n\r\n    }\r\n    let connectedWithAuthRedirect = connect(mapStateToProps)(RedirectComponent)\r\n\r\n    return connectedWithAuthRedirect;\r\n}\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo\":\"Users_photo__1m57y\",\"users\":\"Users_users__3VxBH\",\"name\":\"Users_name__33oq_\",\"button\":\"Users_button__14JR_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__3V9y-\",\"pages\":\"Paginator_pages__-cKN-\"};","import React from 'react'\r\nimport {Button} from \"@material-ui/core\";\r\nimport styles from './Paginator.module.css'\r\n\r\nlet Paginator = (props) =>{\r\n    let pagesCount = props.totalUsersCount / props.pageSize;\r\n    let pages = [];\r\n    for (let i = 1; i <= Math.ceil(pagesCount); i++) {\r\n        pages.push(i);\r\n    }\r\n    let portionSize = 5;\r\n    let portionCount = pagesCount/portionSize;\r\n\r\n    let leftPortionNumber = portionSize * (props.portionNumber - 1) + 1;\r\n    let rightPortionNumber = portionSize * props.portionNumber;\r\n\r\n    let new_pages = pages.filter(el=>{\r\n        return el >= leftPortionNumber && el <=rightPortionNumber;\r\n    }).map(el => {\r\n        return <span className={(props.currentPage === el && styles.selectedPage) || styles.pages} onClick={() => {\r\n            props.onCurrentPageChange(el);\r\n        }}>{el} </span>\r\n\r\n    })\r\n    return (<div> {props.portionNumber > 1 ?<Button color=\"primary\" onClick={props.PrevPortion}>prev</Button> : null} {new_pages} {props.portionNumber < portionCount ? <Button color=\"primary\" onClick={props.NextPortion}>next</Button> : null}</div>)\r\n}\r\nexport default Paginator;\r\n","import React, {useState} from 'react'\r\nimport styles from './Users.module.css'\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\n\r\nlet Users = (props) => {\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n\r\n\r\n    let NextPortion = () =>{\r\n        setPortionNumber(portionNumber + 1);\r\n    }\r\n    let PrevPortion = () =>{\r\n        setPortionNumber(portionNumber - 1);\r\n    }\r\n    let allUsers = props.users.map(u => <div key={u.id}>\r\n        <div><Link to={\"/profile/\" + u.id}><img className={styles.photo}\r\n                                                src={u.uniqueUrlName || \"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png\"}\r\n                                                alt=\"userPhoto\"/></Link></div>\r\n        <div className={styles.name}>{u.name}</div>\r\n        <div className={styles.button}>{u.followed ? <button onClick={() => {\r\n                props.unfollowThunk(u.id);\r\n            }}>Unfollow</button> :\r\n            <button onClick={() => {\r\n                props.followThunk(u.id);\r\n            }}>Follow</button>}\r\n        </div>\r\n    </div>);\r\n\r\n    if (props.isFetching) {\r\n        return <div className={styles.users}><Preloader/></div>\r\n    } else {\r\n        return <div className={styles.users}><Paginator totalUsersCount={props.totalUsersCount}\r\n                                                        pageSize={props.pageSize}\r\n                                                        currentPage={props.currentPage}\r\n                                                        onCurrentPageChange={props.onCurrentPageChange}\r\n                                                        portionNumber = {portionNumber}\r\n                                                        NextPortion = {NextPortion}\r\n                                                        PrevPortion = {PrevPortion}/>{allUsers}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Users;\r\n","import React from 'react'\r\nimport {connect} from \"react-redux\";\r\nimport {followThunk, setCurrentPage,\r\n    setUsersThunk,\r\n    unfollowThunk\r\n} from \"../../redux/users-reducer\";\r\nimport Users from \"./Users\";\r\nimport {WithAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\nclass UsersApiContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.setUsersThunk(this.props.currentPage, this.props.pageSize);\r\n    }\r\n\r\n    onCurrentPageChange = (page) => {\r\n        this.props.setCurrentPage(page);\r\n        this.props.setUsersThunk(page, this.props.pageSize);\r\n    }\r\n\r\n    render() {\r\n        return <Users totalUsersCount={this.props.totalUsersCount}\r\n                      pageSize={this.props.pageSize}\r\n                      currentPage={this.props.currentPage}\r\n                      onCurrentPageChange={this.onCurrentPageChange}\r\n                      users={this.props.users}\r\n                      followThunk={this.props.followThunk}\r\n                      unfollowThunk={this.props.unfollowThunk}\r\n                      isFetching={this.props.isFetching}/>\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: state.usersPage.users,\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching\r\n    }\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, {\r\n    followThunk,\r\n    unfollowThunk,\r\n    setCurrentPage,\r\n    setUsersThunk\r\n}),WithAuthRedirect)(UsersApiContainer)\r\n"],"sourceRoot":""}